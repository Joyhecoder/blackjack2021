
let deckOfCards = [
    {
        'card':'2',
        'value': 2,
        'suit': 'club',
        'image': 'images/2_of_clubs.png'
     },

     {
        'card':'2',
        'value': 2,
        'suit': 'diamonds',
        'image': 'images/2_of_diamonds.png'
     },

     {
        'card':'2',
        'value': 2,
        'suit': 'hearts',
        'image': 'images/2_of_hearts.png'
     },

     {
        'card':'2',
        'value': 2,
        'suit': 'spades',
        'image': 'images/2_of_spades.png'
     },


    {
        'card':'3',
        'value': 3,
        'suit': 'club',
        'image': 'images/3_of_clubs.png'
     },

     {
        'card':'3',
        'value': 3,
        'suit': 'diamonds',
        'image': 'images/3_of_diamonds.png'
     },

     {
        'card':'3',
        'value': 3,
        'suit': 'hearts',
        'image': 'images/3_of_hearts.png'
     },

     {
        'card':'3',
        'value': 3,
        'suit': 'spades',
        'image': 'images/3_of_spades.png'
     },

    {
        'card':'4',
        'value': 4,
        'suit': 'club',
        'image': 'images/4_of_clubs.png'
     },

     {
        'card':'4',
        'value': 4,
        'suit': 'diamonds',
        'image': 'images/4_of_diamonds.png'
     },

     {
        'card':'4',
        'value': 4,
        'suit': 'hearts',
        'image': 'images/4_of_hearts.png'
     },

     {
        'card':'4',
        'value': 4,
        'suit': 'spades',
        'image': 'images/4_of_spades.png'
     },

    {
        'card':'5',
        'value': 5,
        'suit': 'club',
        'image': 'images/5_of_clubs.png'
     },

     {
        'card':'5',
        'value': 5,
        'suit': 'diamonds',
        'image': 'images/5_of_diamonds.png'
     },

     {
        'card':'5',
        'value': 5,
        'suit': 'hearts',
        'image': 'images/5_of_hearts.png'
     },

     {
        'card':'5',
        'value': 5,
        'suit': 'spades',
        'image': 'images/5_of_spades.png'
     },

    {
        'card':'6',
        'value': 6,
        'suit': 'club',
        'image': 'images/6_of_clubs.png'
     },

     {
        'card':'6',
        'value': 6,
        'suit': 'diamonds',
        'image': 'images/6_of_diamonds.png'
     },

     {
        'card':'6',
        'value': 6,
        'suit': 'hearts',
        'image': 'images/6_of_hearts.png'
     },

     {
        'card':'6',
        'value': 6,
        'suit': 'spades',
        'image': 'images/6_of_spades.png'
     },

    {
        'card':'7',
        'value': 7,
        'suit': 'club',
        'image': 'images/7_of_clubs.png'
     },

     {
        'card':'7',
        'value': 7,
        'suit': 'diamonds',
        'image': 'images/7_of_diamonds.png'
     },

     {
        'card':'7',
        'value': 7,
        'suit': 'hearts',
        'image': 'images/7_of_hearts.png'
     },

     {
        'card':'7',
        'value': 7,
        'suit': 'spades',
        'image': 'images/7_of_spades.png'
     },

    {
        'card':'8',
        'value': 8,
        'suit': 'club',
        'image': 'images/8_of_clubs.png'
     },

     {
        'card':'8',
        'value': 8,
        'suit': 'diamonds',
        'image': 'images/8_of_diamonds.png'
     },

     {
        'card':'8',
        'value': 8,
        'suit': 'hearts',
        'image': 'images/8_of_hearts.png'
     },

     {
        'card':'8',
        'value': 8,
        'suit': 'spades',
        'image': 'images/8_of_spades.png'
     },

    {
        'card':'9',
        'value': 9,
        'suit': 'club',
        'image': 'images/9_of_clubs.png'
     },

     {
        'card':'9',
        'value': 9,
        'suit': 'diamonds',
        'image': 'images/9_of_diamonds.png'
     },

     {
        'card':'9',
        'value': 9,
        'suit': 'hearts',
        'image': 'images/9_of_hearts.png'
     },

     {
        'card':'9',
        'value': 9,
        'suit': 'spades',
        'image': 'images/9_of_spades.png'
     },

    {
        'card':'10',
        'value': 10,
        'suit': 'club',
        'image': 'images/10_of_clubs.png'
     },

     {
        'card':'10',
        'value': 10,
        'suit': 'diamonds',
        'image': 'images/10_of_diamonds.png'
     },

     {
        'card':'10',
        'value': 10,
        'suit': 'hearts',
        'image': 'images/10_of_hearts.png'
     },

     {
        'card':'10',
        'value': 10,
        'suit': 'spades',
        'image': 'images/10_of_spades.png'
     },

     {
        'card':'ace',
        'value1': 1,
        'value2': 11,
        'suit': 'clubs',
        'image': 'images/ace_of_clubs.png'
     },
     {
        'card':'ace',
        'value1': 1,
        'value2': 11,
        'suit': 'diamonds',
        'image': 'images/ace_of_diamonds.png'
     },
     {
        'card':'ace',
        'value1': 1,
        'value2': 11,
        'suit': 'hearts',
        'image': 'images/ace_of_hearts.png'
     },
     {
        'card':'ace',
        'value1': 1,
        'value2': 11,
        'suit': 'spades',
        'image': 'images/ace_of_spades.png'
     },

     {
        'card':'jack',
        'value': 10,
        'suit': 'clubs',
        'image': 'images/jack_of_clubs.png'
     },
     {
        'card':'jack',
        'value': 10,
        'suit': 'diamonds',
        'image': 'images/jack_of_diamonds.png'
     },
     {
        'card':'jack',
        'value': 10,
        'suit': 'hearts',
        'image': 'images/jack_of_hearts.png'
     },
     {
        'card':'jack',
        'value': 10,
        'suit': 'spades',
        'image': 'images/jack_of_spades.png'
     },
     {
        'card':'king',
        'value': 10,
        'suit': 'clubs',
        'image': 'images/king_of_clubs.png'
     },
     {
        'card':'king',
        'value': 10,
        'suit': 'diamonds',
        'image': 'images/king_of_diamonds.png'
     },
     {
        'card':'king',
        'value': 10,
        'suit': 'hearts',
        'image': 'images/king_of_hearts.png'
     },
     {
        'card':'king',
        'value': 10,
        'suit': 'spades',
        'image': 'images/king_of_spades.png'
     },
     {
        'card':'queen',
        'value': 10,
        'suit': 'clubs',
        'image': 'images/queen_of_clubs.png'
     },
     {
        'card':'queen',
        'value': 10,
        'suit': 'diamonds',
        'image': 'images/queen_of_diamonds.png'
     },
     {
        'card':'queen',
        'value': 10,
        'suit': 'hearts',
        'image': 'images/queen_of_hearts.png'
     },
     {
        'card':'queen',
        'value': 10,
        'suit': 'spades',
        'image': 'images/queen_of_spades.png'
     },

]

let dealerbackground = {"image": 'images/backgroundcard.png' };
let dealButton = document.querySelector('#deal-button');
let imageDealer = document.querySelector('#dealer-hand');
let imagePlayer = document.querySelector('#player-hand');
let dealerPoint = document.querySelector('#dealer-points');
let playerPoint = document.querySelector('#player-points');
let hitButton = document.querySelector('#hit-button');
let standButton = document.querySelector('#stand-button');
let resetButton = document.querySelector('#reset-button');
let gameOver = document.querySelector('#game-over');
let deck = deckOfCards;
let pPoint=0;
let dPoint= 0;

let sum = 0;



let addDisable = ()=>{
    dealButton.setAttribute("disabled"," ");
    hitButton.setAttribute("disabled", " ");
    standButton.setAttribute("disabled", " ");
    resetButton.setAttribute("disabled", " ");
}

//add bet function
let betButton = document.querySelector('#bet-button');
let betInput = document.querySelector("#input");

let finalBalance = document.querySelector('#final-balance');

let number = 0;

betButton.addEventListener('click', ()=>{
    
    let inputValue = document.getElementById("input").value
  
    number = inputValue;
    dealButton.removeAttribute("disabled");

})


//add eventListener to deal button
let run = true;
let dealerArr =[];
let playerArr =[];


dealButton.addEventListener('click', ()=>{
    if(run){
        hitButton.removeAttribute("disabled");
        standButton.removeAttribute("disabled");
        resetButton.removeAttribute("disabled");
    for (let i = 0; i < 2; i++) {
        let randomCard = deck[Math.floor(Math.random()*deck.length)];
        let index = deck.findIndex(d => d===randomCard)
        deck.splice(index,1);
        playerArr.push(randomCard);

        let randomCard2 = deck[Math.floor(Math.random()*deck.length)];
        let index2 = deck.findIndex(d => d===randomCard)
        deck.splice(index2,1);
        dealerArr.push(randomCard2);
        console.log(dealerArr)

      }

      //adding points onto the screen
      //dealer point
    if(dealerArr.some(card => card.card === "ace")){
        if(dealerArr[0].card === "ace" && dealerArr[1].card !== "ace"){
            dPoint = dealerArr[0].value2 + dealerArr[1].value
        }else if(dealerArr[0].card !== "ace" && dealerArr[1].card === "ace"){
            dPoint = dealerArr[0].value + dealerArr[1].value2
        }else{
            dPoint = dealerArr[0].value1 + dealerArr[1].value2
        }
    }else{
    
      dPoint= dealerArr[0].value + dealerArr[1].value
     
    }
    console.log(dPoint)
   
    //player point
   
    if(playerArr.some(card => card.card === "ace")){
        if(playerArr[0].card === "ace" && playerArr[1].card !== "ace"){
            pPoint = playerArr[0].value2 + playerArr[1].value
        }else if(playerArr[0].card !== "ace" && playerArr[1].card === "ace"){
            pPoint = playerArr[0].value + playerArr[1].value2
        }else{
            pPoint = playerArr[0].value1 + playerArr[1].value2
        }
    }else{
    
      pPoint= playerArr[0].value + playerArr[1].value
     
    }

    playerPoint.innerHTML=pPoint

    
    //add the card picture onto the screen
 
        imageDealer.innerHTML += `<img src="${dealerArr[0].image}" alt="">`
        imageDealer.innerHTML += `<img src="${dealerbackground.image}" alt=""></img>`
        
        for(let i=0; i < playerArr.length; i++){
            imagePlayer.innerHTML += `<img src="${playerArr[i].image}" alt="">`
        }


    //player points =21 for the first round, win
    if(pPoint===21){
        gameOver.innerHTML = "Player win! Game is over!"
        sum += number*1.5;
        finalBalance.innerHTML= `${sum}`
        
    }

    run = false;
   
}
})

//add evenListener to hit button

hitButton.addEventListener('click',()=>{

    //draw one card from the deck
    let randomCard = deck[Math.floor(Math.random()*deck.length)];
    let index = deck.findIndex(d => d===randomCard)
    deck.splice(index,1);
    playerArr.push(randomCard);
    console.log(playerArr);


    //display the card on the screen and add points on to Player screen
    let latestCard = playerArr.slice(-1)
    console.log(latestCard);
    
   for(let i= (playerArr.length -1); i < playerArr.length; i++){
    console.log(i);
    imagePlayer.innerHTML += `<img src="${playerArr[i].image}" alt="">`
    console.log(imagePlayer);

    console.log(playerArr[i].card)
    if(playerArr[i].card == 'ace'){
        if(pPoint<=10){
            pPoint+= playerArr[i].value2;
        }else{
            pPoint+= playerArr[i].value1;
        }
    }else{
        pPoint+= playerArr[i].value;
    }
    playerPoint.innerHTML=pPoint
   }

   if(pPoint>21){
    gameOver.innerHTML = "Player bust! Game is over. Player lost!"
    sum -= number
    finalBalance.innerHTML= `${sum}`

   }

})

//add evenListener to stand button
standButton.addEventListener('click', ()=>{
    hitButton.setAttribute("disabled", " ")
    //draw one more card or not
    if(dPoint<=16){
        console.log(dPoint)
        
        let randomCard = deck[Math.floor(Math.random()*deck.length)];
        let index = deck.findIndex(d => d===randomCard)
        deck.splice(index,1);
        dealerArr.push(randomCard);
        console.log(dealerArr)

        //display the card on the screen and add points on to Player screen
        
        imageDealer.innerHTML = "";
        for(let i= 0; i < dealerArr.length; i++){
            
            imageDealer.innerHTML += `<img src="${dealerArr[i].image}" alt="">`}
        
        for(let i =2; i < dealerArr. length; i++){
            if(dealerArr[i].card == 'ace'){
                if(dPoint<=10){
                    dPoint+= dealerArr[i].value2;
                }else{
                    dPoint+= dealerArr[i].value1;
                }
            }else{
                dPoint+= dealerArr[i].value;
            }
        }
            dealerPoint.innerHTML=dPoint 
            if(dPoint > 21){
                gameOver.innerHTML = "Dealer bust! Player win! Game over."
                sum += number*2
                finalBalance.innerHTML= `${sum}`
                
            }else{
                if(dPoint> pPoint){
                    gameOver.innerHTML = "Dealer win! Game over."
                    sum -= number
                    finalBalance.innerHTML= `${sum}`
                }else if(dPoint==pPoint){
                    gameOver.innerHTML = "It's a tie."
                    sum -= number
                    finalBalance.innerHTML= `${sum}`
                }else{
                    gameOver.innerHTML = "Player win! Game over."
                    sum += number*2
                    finalBalance.innerHTML= `${sum}`
                    
                }
            }
           
            
    }else{
        imageDealer.innerHTML = "";
        for(let i= 0; i < dealerArr.length; i++){
            
            imageDealer.innerHTML += `<img src="${dealerArr[i].image}" alt="">`}

        if(dPoint > pPoint){
            
            if(dPoint<=21){
            gameOver.innerHTML = "Dealer win! Game over."
            sum -= number
            finalBalance.innerHTML= `${sum}`
            }else{
                gameOver.innerHTML = "Dealer bust! Player win! Game over."
                sum += number*2
                finalBalance.innerHTML= `${sum}`
            }
        }else if(dPoint==pPoint){
            gameOver.innerHTML = "It's a tie."
            sum -= number
            finalBalance.innerHTML= `${sum}`
        }else{
            gameOver.innerHTML = "Player win! Game over."
            sum += number*2
            finalBalance.innerHTML= `${sum}`
        }

        dealerPoint.innerHTML=dPoint
    }

})


//reset button
resetButton.addEventListener("click", ()=>{
    dealerArr =[];
    playerArr =[];
    dPoint = 0;
    pPoint = 0;
    dealerPoint.innerHTML = "";
    playerPoint.innerHTML = "";
    imageDealer.innerHTML = "";
    imagePlayer.innerHTML = "";
    gameOver.innerHTML = "";
    run = true;
    betrun = true;

    inputValue="";
    finalBalance.innerHTML= `${sum}`;
    addDisable();
    
})





